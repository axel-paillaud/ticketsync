{% extends 'base.html.twig' %}

{% block title %}Ticket{% endblock %}

{% block body %}
    <h1>Ticket</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ ticket.id }}</td>
            </tr>
            <tr>
                <th>Title</th>
                <td>{{ ticket.title }}</td>
            </tr>
            <tr>
                <th>Description</th>
                <td>{{ ticket.description }}</td>
            </tr>
            <tr>
                <th>CreatedAt</th>
                <td>{{ ticket.createdAt ? ticket.createdAt|date('Y-m-d H:i:s') : '' }}</td>
            </tr>
            <tr>
                <th>UpdatedAt</th>
                <td>{{ ticket.updatedAt ? ticket.updatedAt|date('Y-m-d H:i:s') : '' }}</td>
            </tr>
        </tbody>
    </table>

    {# Attachments section #}
    {% if ticket.attachments|length > 0 %}
        <hr>
        <h2>Pi√®ces jointes ({{ ticket.attachments|length }})</h2>
        <div class="row">
            {% for attachment in ticket.attachments %}
                {% include 'attachment/_attachment_card.html.twig' with {
                    'attachment': attachment,
                    'ticketId': ticket.id,
                    'size': 'large'
                } %}
            {% endfor %}
        </div>
    {% endif %}

    {# Comment section #}
    {% include 'comment/_comment_list.html.twig' with {'ticket': ticket} %}

    {# Comment form #}
    {% include 'comment/_comment_form.html.twig' with {'commentForm': commentForm} %}

    <a href="{{ path('app_ticket_index', {'organizationSlug': currentOrganization.slug}) }}">back to list</a>

    <a href="{{ path('app_ticket_edit', {'organizationSlug': currentOrganization.slug, 'ticketId': ticket.id}) }}">edit</a>

    {{ include('ticket/_delete_form.html.twig') }}
{% endblock %}
