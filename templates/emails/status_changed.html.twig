{% extends 'emails/_layout.html.twig' %}

{% block title %}
    {{ 'Ticket {ticketId} status updated'|trans({ 'ticketId': '#' ~ ticket.id }) }}
{% endblock %}

{% block content %}
    <p class="greeting">{{ 'Hello'|trans }} <strong>{{ recipient.name }}</strong>,</p>

    <p>{{ 'The status of ticket'|trans }} <strong>#{{ ticket.id }}</strong> {{ 'has been updated.'|trans }}</p>

    <div class="info-box">
        <h2>{{ 'Ticket'|trans }} #{{ ticket.id }}: {{ ticket.title }}</h2>
        <p><strong>{{ 'Organization:'|trans }}</strong> {{ ticket.organization.name }}</p>

        <p><strong>{{ 'Status changed:'|trans }}</strong></p>
        <p>
            <span class="badge badge-status">{{ oldStatus.name|trans }}</span>
            â†’
            <span class="badge badge-status">{{ newStatus.name|trans }}</span>
        </p>

        <p>
            <strong>{{ 'Priority:'|trans }}</strong>
            <span class="badge badge-priority">{{ ticket.priority.name|trans }}</span>
        </p>

        {% if ticket.assignedTo %}
            <p><strong>{{ 'Assigned to:'|trans }}</strong> {{ ticket.assignedTo.name }}</p>
        {% endif %}

        {% if ticket.description %}
            <p><strong>{{ 'Description:'|trans }}</strong></p>
            <div class="description">{{ ticket.description|markdown_to_html|raw }}</div>
        {% endif %}
    </div>

    <a href="{{ url('app_ticket_show', {organizationSlug: ticket.organization.slug, ticketId: ticket.id}) }}" class="button">
        {{ 'View ticket'|trans }}
    </a>
{% endblock %}
